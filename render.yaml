services:
  - type: web
    name: beltspeakingaiv2
    env: docker
    plan: starter          # or 'free'/'standard' etc.
    region: oregon         # pick your preferred region
    dockerfilePath: Dockerfile.render
    autoDeploy: true
    healthCheckPath: /health

    envVars:
      # --- Secrets ---
      - key: OPENAI_API_KEY
        sync: false          # set this in the Render dashboard after deploy

      # --- App behavior ---
      - key: BELT_SAFE_MODE
        value: "0"           # 0 = allow local models; set 1 to disable them
      - key: USE_OPENAI_EMBED
        value: "1"           # enable semantic relevance via OpenAI embeddings
      - key: OPENAI_EMBED_MODEL
        value: text-embedding-3-small
      - key: USE_OPENAI_ASR
        value: "0"           # set to 1 to use Whisper API instead of local ASR
      - key: OPENAI_ASR_MODEL
        value: whisper-1

      # --- Scoring weights & thresholds ---
      - key: HYBRID_W_AUDIO
        value: "0.5"
      - key: HYBRID_W_TEXT
        value: "0.5"
      - key: HYBRID_W_REL
        value: "0.2"
      - key: T_A2
        value: "0.25"
      - key: T_B1
        value: "0.40"
      - key: T_B2
        value: "0.60"
      - key: T_C1
        value: "0.75"

      # --- Paths & performance ---
      - key: PROMPTS_PATH
        value: /app/prompts.json
      - key: OMP_NUM_THREADS
        value: "1"
      - key: MKL_NUM_THREADS
        value: "1"
